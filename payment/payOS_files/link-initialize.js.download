!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BankHub",[],t):"object"==typeof exports?exports.BankHub=t():e.BankHub=t()}(self,(()=>(()=>{"use strict";var e={};return{806:function(e,t){var i,r,n,s,a,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.useBankHubLink=void 0;const l={LOCAL:"http://localhost:3000",DEV:"https://dev.link.bankhub.dev",PROD:"https://link.bankhub.dev"},f={enterprise:"enterprise",personal:"personal",all:"all"},d={ekyc:"ekyc",qrpay:"qrpay",all:"all"},h="bankhub-iframe";class u{constructor(e){i.add(this),this.state=void 0,r.set(this,((e,t)=>{})),n.set(this,(()=>{})),this.messageHandler=null,this.closeIframe=()=>{var e;this.removeEventListener();const t=document.getElementById(h);t&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t))};const{redirectUri:t,grantToken:s,iframe:a,state:c,feature:l,fiServiceType:f,ekyc:d,official:u,onSuccess:p,onExit:m}=e;this.validateConfig(e),this.redirectUri=t,this.grantToken=s,this.state=c,l&&(this.feature=l),f&&(this.fiServiceType=f),null!=d&&(this.ekyc=d),null!=u&&(this.official=u),this.iframe=a,p&&o(this,r,p,"f"),m&&o(this,n,m,"f")}validateConfig({redirectUri:e,grantToken:t,state:i,feature:r,fiServiceType:n,onSuccess:s,onExit:a}){if(!e||!t)throw new Error("redirectUri and grantToken are required");if(n&&!Object.values(f).includes(n)&&Object.values(f).join(", "),r&&!Object.values(d).includes(r))throw new Error("feature is invalid. It must be: "+Object.values(d).join(", "));if(i&&"string"!=typeof i)throw new Error("state must be a string");if(i&&i.includes(" "))throw new Error("state must not contain space character");if(s&&"function"!=typeof s)throw new Error("onSuccess must be a function");if(a&&"function"!=typeof a)throw new Error("onExit must be a function")}openRedirect(e){window.location.href=e}open(){const e=`${l.PROD}${function(e){if(!e||0===Object.keys(e).length)return"";const t=new URLSearchParams;for(const[i,r]of Object.entries(e))null!=r&&(Array.isArray(r)?r.forEach((e=>t.append(i,e))):t.append(i,r));const i=t.toString();return i?`?${i}`:""}({redirectUri:this.redirectUri,iframe:this.iframe,grantToken:this.grantToken,fiServiceType:this.fiServiceType,feature:this.feature,state:this.state,ekyc:this.ekyc,official:this.official})}`;this.iframe?this.openIframe(e):this.openRedirect(e)}addEventListener(){this.messageHandler=c(this,i,"m",s).bind(this),window.addEventListener("message",this.messageHandler,!1)}removeEventListener(){this.messageHandler&&window.removeEventListener("message",this.messageHandler)}openIframe(e){if(this.addEventListener(),document.getElementsByTagName("body")){const t=document.createElement("iframe");t.id=h,t.src=e,t.style.overflow="hidden",t.style.position="fixed",t.allowFullscreen=!0,t.style.zIndex="1500",t.allow="clipboard-write",t.height=window.innerHeight.toString(),t.width="100%",document.body.insertBefore(t,document.body.firstChild)}}}r=new WeakMap,n=new WeakMap,i=new WeakSet,s=function(e){if(Object.values(l).includes(e.origin)&&c(this,i,"m",a).call(this,e.data)){const{type:t,data:i}=JSON.parse(e.data);if(!1===i.loading&&this.closeIframe(),"status"===t)c(this,n,"f").call(this);else if("credential"===t)return void c(this,r,"f").call(this,i.publicToken,this.state)}},a=function(e){if(e&&"string"==typeof e&&e.startsWith("{")&&e.endsWith("}")){try{JSON.parse(e)}catch(e){return!1}return!0}return!1},t.useBankHubLink=e=>{const t={state:void 0,feature:d.all,fiServiceType:f.all,ekyc:!1,official:!1,onSuccess:(e,t)=>{},onExit:()=>{}},i=Object.assign(Object.assign({},t),e),r=new u(i);return{open:r.open.bind(r),close:r.closeIframe.bind(r)}}}}[806](0,e),e})()));